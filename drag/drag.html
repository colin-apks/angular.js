<!DOCTYPE html>
<html lang="en" ng-app="dragModule">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			padding: 0px;
			margin: 0px;
		}
		.slide{
			width: 500px;
			height: 18px;
			background: #ccc;
			margin: 100px auto;
			position: relative;
		}
		span{

			display: inline-block;
			vertical-align: top;
		}
		#clicked{
			
			width: 5px;
			height: 30px;
			background: red;
			position: absolute;
		}
		#green{
			position: absolute;
			height: 18px;
			background: green;
		}
	</style>
	<script type="text/javascript" src="angular.min.js"></script>
	<script type="text/javascript">
		
	angular.module('dragModule', []).
	controller('dragController',function($scope){
    	$scope.w=0;

    }).
	directive('myDraggable', function($document) {
		return {
			restrict:'EA',
			link:function(scope, element, attr) {
		      var startX = 0, startY =100, x = 0, y = 0;

		      element.css({
			       position: 'absolute',
			       border: '1px solid red',
			       cursor: 'pointer',
			       top:'-5px'
		      });

		      element.on('mousedown', function(event) {
		        // Prevent default dragging of selected content
		        event.preventDefault();
		        startX = event.screenX - x;
		        startY = event.screenY - y;
		        $document.on('mousemove', mousemove);
		        $document.on('mouseup', mouseup);
		      });

		      function mousemove(event) {
		        y = -5;
		        x = event.screenX - startX<=0?0:(event.screenX - startX>=500?500:event.screenX - startX);
		        element.css({
		          top: y + 'px',
		          left:  x + 'px'
		        });
		        scope.$apply(function(){
		        	 scope.w=x;
		        })
		        


		       
		      }

		      function mouseup() {
		        $document.unbind('mousemove', mousemove);
		        $document.unbind('mouseup', mouseup);
		      }
		    }
		}
	  
    })

		
	</script>
</head>
<body ng-controller='dragController'>
	<div>{{w}}</div>
	<div class="slide" >
		<span id='green' style="width:{{w}}px"></span><span my-draggable id="clicked" ></span>
	</div>
	<input type="text"  ng-model="w" maxlength="3">
	
</body>
</html>